
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>CQ Queries Demystified - IT Gumby</title>
  <meta name="author" content="Brian Street">

  
  <meta name="description" content="The JCR (Java Content Repository) is a data-store at its heart. Most examples around it demonstrate either building components or walking the Node &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://ItGumby.github.io/blog/2014/10/cq-queries-demystified">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="IT Gumby" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1 class="msg">
    <a href="/">IT Gumby</a>
    <span class="msg">text-shadow courtesy <a href="http://leaverou.github.io/animatable/#text-shadow">Lea Verou</a></span>
  </h1>
  
    <h2>Flexible solutions for general software engineering</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:ItGumby.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/presentations/index.html">Presentations</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">CQ Queries Demystified</h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-10-09T18:36:00-06:00" pubdate data-updated="true">2014-Oct-09</time>
        
         | <a href="#disqus_thread">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><div class="paragraph">
<p>The JCR (Java Content Repository) is a data-store at its heart.  Most examples around it demonstrate either building components or walking the Node tree.  It is hard to find examples around queries and the JCR.  To make things worse, we have a number of options and little resourcs to compare them.  My humble goal is to make JCR queries less scary - to myself and others.</p>
</div>
<div class="sect1">
<h2 id="why-use-queries">Why Use Queries?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>I see 2 primary benefits to using queries compared to "walking the nodes": efficiency and flexibility.</p>
</div>
<div class="paragraph">
<p>Queries can be <strong>more efficient</strong> when the desired nodes/pages are "sparse".  By sparse, I mean you have to visit a lot more nodes than you keep.  In my recent experience, I was looking for approximately 200-300 pages out of 2,000.  Converting from page traversal to a query improved performance by an order of magnitude (from approximately 10 sec. to well under a second.)</p>
</div>
<div class="paragraph">
<p>Queries also permit <strong>flexibility in structure</strong>.  <a href="http://wiki.apache.org/jackrabbit/DavidsModel#Rule_.231">David&#8217;s Rules</a> encourage prioritizing content over formal structure.  If walking the tree of nodes or pages, a developer may limit depth of searching (either a flat level or limited recursion) for simplicity of code and/or performance.  However, in a CMS environment, there are tremendous benefits for authors when they can create an arbitrary taxonomy around their data or pages.</p>
</div>
<div class="paragraph">
<p>There are two primary APIs for Querying in CQ5:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>javax.jcr.query</code> provides a query interface API in a variety of syntaxes.  <a href="http://www.day.com/specs/javax.jcr/javadocs/jcr-2.0/javax/jcr/query/QueryResult.html">QueryResult</a> can return <a href="http://www.day.com/specs/javax.jcr/javadocs/jcr-2.0/javax/jcr/NodeIterator.html">NodeIterators</a> or <a href="http://www.day.com/specs/javax.jcr/javadocs/jcr-2.0/javax/jcr/query/RowIterator.html">RowIterators</a> (where a <a href="http://www.day.com/specs/javax.jcr/javadocs/jcr-2.0/javax/jcr/query/Row.html">Row</a> can have 1 or more columns. Columns can be <code><a href="http://www.day.com/specs/javax.jcr/javadocs/jcr-2.0/javax/jcr/Node.html">Node</a></code> node,  <code><a href="http://www.day.com/specs/javax.jcr/javadocs/jcr-2.0/javax/jcr/Value.html">Value</a></code> property, <code>String</code> path or <code>double</code> score).</p>
</li>
<li>
<p><code>com.day.cq.search</code> provides both a REST interface and an API.  The <a href="http://docs.adobe.com/docs/en/aem/6-0/develop/ref/javadoc/com/day/cq/search/result/SearchResult.html">SearchResult</a> can return <code>Iterator&lt;Resource&gt;</code>, <code>Iterator&lt;Node&gt;</code>, or <code>List&lt;<a href="http://docs.adobe.com/docs/en/aem/6-0/develop/ref/javadoc/com/day/cq/search/result/ResultPage.html">ResultPage</a>&gt;</code> that match the Predicates.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="preconditions">Preconditions</h3>
<div class="paragraph">
<p>CQ5 searches are "powered by" <a href="http://lucene.apache.org/">Apache Lucene</a> (although AEM6 is converting to <a href="http://lucene.apache.org/solr/">Apache Solr</a>).  An important limitation is that indexing only examines Node properties that are 16KB or less in size - so anything larger won&#8217;t be found by any searching mechanism.</p>
</div>
<div class="paragraph">
<p>Internally, the queries are converted to an AQM (Abstract Query Model).  The interesting aspect about AQM is the ability to create new query syntaxes and predicates - but that is well beyond the scope of this post.</p>
</div>
</div>
<div class="sect2">
<h3 id="nodetypes">NodeTypes</h3>
<div class="paragraph">
<p>I recommend paying attention to the <a href="http://jackrabbit.apache.org/node-type-visualization.html">NodeType</a> you use.  At the top of the hierarchy tree is <code>nt:base</code>, (so all nodes inherit from it).  Because of this inheritance, most examples show using it as a "works anywhere" approach.  However, I feel this is a poor approach and you would be better served selecting a more appropriate type (<code>jcr:primaryType</code> property of your desired nodes).  I would like to highlight:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>cq:Page</code> to match just <a href="http://dev.day.com/docs/en/cq/current/javadoc/com/day/cq/wcm/api/Page.html">Page</a> nodes</p>
</li>
<li>
<p><code>cq:PageContent</code> to easily convert to <a href="http://dev.day.com/docs/en/cq/current/javadoc/com/day/cq/commons/inherit/InheritanceValueMap.html">InheritanceValueMap</a> or <a href="http://dev.day.com/docs/en/cq/current/javadoc/org/apache/sling/api/resource/ValueMap.html">ValueMap</a></p>
</li>
<li>
<p><code>nt:unstructured</code> to find content nodes for generic components or content</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="jcr-queries-a-href-http-www-day-com-specs-javax-jcr-javadocs-jcr-2-0-javax-jcr-query-query-html-code-javax-jcr-query-code-a">JCR Queries: <a href="http://www.day.com/specs/javax.jcr/javadocs/jcr-2.0/javax/jcr/query/Query.html"><code>javax.jcr.query</code></a></h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 1. jcr.query Syntaxes</caption>
<colgroup>
<col style="width:20%;">
<col style="width:40%;">
<col style="width:40%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Syntax</th>
<th class="tableblock halign-left valign-top">Cons</th>
<th class="tableblock halign-left valign-top">Pros</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://jackrabbit.apache.org/api/2.2/org/apache/jackrabbit/commons/query/sql2/package-summary.html">SQL2</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">poor documentation<br>
no sub-queries<br>
limited joins<br>
new functions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"looks" like a query<br>
limited joins (K.I.S.S. principle)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://jackrabbit.apache.org/api/2.2/org/apache/jackrabbit/spi/commons/query/xpath/package-summary.html">XPath</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"strange" syntax (<a href="http://zvon.org/comp/r/tut-XPath_1.html#intro">Tutorials exist</a>)<br>
deprecated in JCR2.0 (yet still supported)<br>
many XPath functions missing</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">maturity &amp; performance<br>
generic (outside JCR) solution for structure/nodes/attributes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/query/qom/QueryObjectModelFactory.html?is-external=true">JQOM</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">poor documentation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">build own query language/API</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no longer supported</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
</tr>
</tbody>
</table>

<div class="listingblock">
<div class="title">Query Example</div>
<div class="content">
<pre class="CodeRay"><code class="jsp language-jsp">&lt;%--
  JCR Query API component.
  Component for dumping list of components found
--%&gt;&lt;%@page session=&quot;false&quot; %&gt;
&lt;%@include file=&quot;/libs/foundation/global.jsp&quot;%&gt;
&lt;%@page import=&quot;javax.jcr.query.Query, java.util.Iterator&quot; %&gt;
&lt;h2&gt;Components from javax.jcr.query&lt;/h2&gt;
&lt;ul&gt;
    &lt;li&gt;# &lt;strong&gt;Component Title&lt;/strong&gt; path&lt;/li&gt;
&lt;%
    // final String xpath = &quot;/jcr:root/apps//element(*, cq:Component) order by @jcr:title&quot;;
    // Iterator&lt;Resource&gt; rscIterator = resourceResolver.findResources(xpath, Query.XPATH);
    final String sql2 = &quot;SELECT * FROM [cq:Component] AS c WHERE ISDESCENDANTNODE([/apps]) ORDER BY lower(c.[jcr:title])&quot;;
    Iterator&lt;Resource&gt; rscIterator = resourceResolver.findResources(sql2, Query.JCR_SQL2);
%&gt;
  &lt;c:forEach var=&quot;compRsc&quot; items=&quot;&lt;%= rscIterator %&gt;&quot; varStatus=&quot;i&quot;&gt;
    &lt;%-- conversion steps to aid in getting Resource properties --%&gt;
    &lt;c:set var=&quot;compProps&quot; value=&quot;&lt;%= ((Resource)pageContext.getAttribute(&quot;compRsc&quot;)).adaptTo(ValueMap.class) %&gt;&quot; /&gt;
    &lt;li&gt;${i.count}: &lt;strong&gt;${compProps['jcr:title']}&lt;/strong&gt; ${compRsc.path}&lt;/li&gt;
  &lt;/c:forEach&gt;
&lt;/ul&gt;</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
Prefer <code>Resource</code> over <code>Node</code>.  It has a cleaner, easier to use API.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
Leverage JSP Expression Language &amp; <a href="http://www.tutorialspoint.com/jsp/jsp_standard_tag_library.htm">JSTL</a> to keep the JSP Template simple &amp; clear.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="querybuilder-api-a-href-http-docs-adobe-com-docs-en-cq-current-javadoc-com-day-cq-search-package-summary-html-code-com-day-cq-search-code-a">QueryBuilder API: <a href="http://docs.adobe.com/docs/en/cq/current/javadoc/com/day/cq/search/package-summary.html"><code>com.day.cq.search</code></a></h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 2. QueryBuilder Syntaxes</caption>
<colgroup>
<col style="width:20%;">
<col style="width:40%;">
<col style="width:40%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Syntax</th>
<th class="tableblock halign-left valign-top">Cons</th>
<th class="tableblock halign-left valign-top">Pros</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://docs.adobe.com/docs/en/aem/6-0/develop/ref/javadoc/com/day/cq/search/QueryBuilder.html">Java API</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">More code to setup<br>
node property values must be extracted (just like JCR Queries)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Iterators for Resources, Nodes (your choice)<br>
Lists of Pages (natural for search results pages)<br>
Predicates make "sense" as search conditions</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">"RESTful" interface at <a href="http://docs.adobe.com/docs/en/aem/6-0/develop/search/querybuilder-api.html">/bin/querybuilder.json</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">grouping predicates is more complex (naming predicates)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">dynamic at runtime<br>
documented examples of multi properties/values/nesting<br>
easy to test/explore via browser, <code>curl</code></p></td>
</tr>
</tbody>
</table>

<div class="listingblock">
<div class="title">Query Example</div>
<div class="content">
<pre class="CodeRay"><code class="jsp language-jsp">&lt;%--
  CQ Query API component.
  Component for dumping list of components found
--%&gt;&lt;%@page session=&quot;false&quot; %&gt;
&lt;%@include file=&quot;/libs/foundation/global.jsp&quot;%&gt;
&lt;%@page import=&quot;java.util.*, com.day.cq.search.*, com.day.cq.search.result.*&quot; %&gt;
&lt;h2&gt;Components from com.day.cq.search (QueryBuilder)&lt;/h2&gt;
&lt;ul&gt;
    &lt;li&gt;# &lt;strong&gt;Component Title&lt;/strong&gt; path&lt;/li&gt;
&lt;%
    Map&lt;String, String&gt; predicates = new HashMap&lt;String, String&gt;() {{
        put(&quot;path&quot;, &quot;/apps&quot;);
        put(&quot;type&quot;, &quot;cq:Component&quot;);
        put(&quot;orderby&quot;, &quot;@jcr:title&quot;);
    }};

    QueryBuilder qb = resourceResolver.adaptTo(QueryBuilder.class);
    Session session = resourceResolver.adaptTo(Session.class);

    Query query = qb.createQuery(PredicateGroup.create(predicates), session);
    query.setHitsPerPage(0); // return ALL results
    Iterator&lt;Resource&gt; rscIterator = query.getResult().getResources();
%&gt;
  &lt;c:forEach var=&quot;compRsc&quot; items=&quot;&lt;%= rscIterator %&gt;&quot; varStatus=&quot;i&quot;&gt;
    &lt;%-- conversion steps to aid in getting Resource properties --%&gt;
    &lt;c:set var=&quot;compProps&quot; value=&quot;&lt;%= ((Resource)pageContext.getAttribute(&quot;compRsc&quot;)).adaptTo(ValueMap.class) %&gt;&quot; /&gt;
    &lt;li&gt;${i.count}: &lt;strong&gt;${compProps['jcr:title']}&lt;/strong&gt; ${compRsc.path}&lt;/li&gt;
  &lt;/c:forEach&gt;
&lt;/ul&gt;</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
JSPs are best kept as templates with little to no Java in them.  In practice,
move the Java to an OSGi-managed class (Model).  If built outside of CQ5, this permits
rapid unit testing and potentially other JVM languages such as groovy.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>REST Example: <a href="http://localhost:4502/bin/querybuilder.json?type=cq:Component&amp;path=/apps&amp;orderby=@title&amp;orderby.sort=asc">http://localhost:4502/bin/querybuilder.json?type=cq:Component&amp;path=/apps&amp;orderby=@title&amp;orderby.sort=asc</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="other-resources">Other Resources</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://wiki.magnolia-cms.com/display/WIKI/JCR+Query+Cheat+Sheet">JCR+Query+Cheat+Sheet</a> for comparing syntaxes</p>
</li>
<li>
<p><a href="http://labs.sixdimensions.com/blog/2014-10-07/9-jcr-sql-2-queries-every-aem-dev-should-know/">9 JCR-SQL2 Queries Every AEM Developer Should Know</a> by Dan Klco</p>
</li>
<li>
<p><a href="http://helpx.adobe.com/experience-manager/kb/HowToDebugJCRQueries.html">HowToDebugJCRQueries.html</a>
discusses adding loggers to a new file (separate from standard error.log) at the DEBUG level.
This logs the queries executed and their execution time.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="sql2-functions-from-a-href-http-www-day-com-specs-jcr-2-0-6_query-html-6-6-2-20jcr-sql2-20notation-jcr-v2-0-spec-a">SQL2 functions (from <a href="http://www.day.com/specs/jcr/2.0/6_Query.html#6.6.2%20JCR-SQL2%20Notation">JCR v2.0 Spec</a>)</h3>
<div class="ulist">
<ul>
<li>
<p>CONTAINS(<em>propName</em>, <em>value</em>)</p>
</li>
<li>
<p>ISCHILDNODE() <em>immediate relationship</em></p>
</li>
<li>
<p>ISDESCENDANTNODE() <em>nested relationship</em></p>
</li>
<li>
<p>ISSAMENODE() <em>for join conditions</em></p>
</li>
<li>
<p>LENGTH(<em>propName</em>)</p>
</li>
<li>
<p>NAME()</p>
</li>
<li>
<p>LOCALNAME()</p>
</li>
<li>
<p>LOWER() <em>lower case the text</em></p>
</li>
<li>
<p>UPPER() <em>upper case the text</em></p>
</li>
<li>
<p>SCORE()</p>
</li>
<li>
<p>CAST(<em>literal</em> AS <em>type</em>)</p>
</li>
</ul>
</div>
</div>
</div>
</div></div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Brian Street</span></span>

      








  


<time datetime="2014-10-09T18:36:00-06:00" pubdate data-updated="true">2014-Oct-09</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/cq5-aem/'>CQ5-AEM</a>, <a class='category' href='/blog/categories/jcr/'>JCR</a>, <a class='category' href='/blog/categories/queries/'>Queries</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://ItGumby.github.io/blog/2014/10/cq-queries-demystified/" data-via="ItGumby" data-counturl="http://ItGumby.github.io/blog/2014/10/cq-queries-demystified/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2014/02/cq-defineObjects-cheatsheet/" title="Previous Post: CQ5 resource - &lt;cq:defineObjects/> CheatSheet">&laquo; CQ5 resource - &lt;cq:defineObjects/> CheatSheet</a>
      
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/10/cq-queries-demystified/">CQ Queries Demystified</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/02/cq-defineObjects-cheatsheet/">CQ5 Resource - &lt;cq:defineObjects/> CheatSheet</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/11/the-evolution-of-looping/">The Evolution of Looping</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/06/octopress-first-steps/">Octopress First Steps</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/06/ghp-with-octopress/">Why Octopress</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/ItGumby">@ItGumby</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'ItGumby',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Brian Street -
  <span class="credit">An <a href="http://octopress.org">Octopress</a> blog.</span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'itgumby';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://ItGumby.github.io/blog/2014/10/cq-queries-demystified/';
        var disqus_url = 'http://ItGumby.github.io/blog/2014/10/cq-queries-demystified/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
