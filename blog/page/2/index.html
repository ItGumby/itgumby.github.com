
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>IT Gumby</title>
  <meta name="author" content="Brian Street">

  
  <meta name="description" content="I am starting out with one of my more common mistakes &ndash; comparing fields that may be null. In C or programmatical languages, a NULL would equal &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://ItGumby.github.io/blog/page/2">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="IT Gumby" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1 class="msg">
    <a href="/">IT Gumby</a>
    <span class="msg">text-shadow courtesy <a href="http://leaverou.github.io/animatable/#text-shadow">Lea Verou</a></span>
  </h1>
  
    <h2>Flexible solutions for general software engineering</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:ItGumby.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/presentations/index.html">Presentations</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/01/sql-null-is-not-comparable/">SQL NULL Is Not Comparable</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-01-24T21:47:00-07:00" pubdate data-updated="true">2008-Jan-24</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I am starting out with one of my more common mistakes &ndash; comparing fields that may be null. In C or programmatical languages, a NULL would equal a NULL. However in SQL, that isn&rsquo;t the case.</p>

<p>An artificial example is:</p>

<p>table: <strong>addresses</strong></p>

<table>
<thead>
<tr>
<th> fName </th>
<th> mInit </th>
<th> lName </th>
<th> data</th>
</tr>
</thead>
<tbody>
<tr>
<td>George </td>
<td> null </td>
<td> Washington </td>
<td> <em>blah</em></td>
</tr>
<tr>
<td>John </td>
<td> null </td>
<td> Adams </td>
<td> <em>blah</em></td>
</tr>
<tr>
<td>John </td>
<td> Q </td>
<td> Adams </td>
<td> <em>blah</em></td>
</tr>
</tbody>
</table>


<p>table: <strong>orders</strong></p>

<table>
<thead>
<tr>
<th> fName </th>
<th> mInit </th>
<th> lName </th>
<th> data</th>
</tr>
</thead>
<tbody>
<tr>
<td>John </td>
<td> Q </td>
<td> Adams </td>
<td> <em>blah</em></td>
</tr>
<tr>
<td>John </td>
<td> null </td>
<td> Adams </td>
<td> <em>blah</em></td>
</tr>
<tr>
<td>George </td>
<td> null </td>
<td> Washington </td>
<td> <em>blah</em></td>
</tr>
</tbody>
</table>


<h2>Wrong Query</h2>

<pre><code>SELECT *
FROM addresses a, orders o
WHERE a.lName = o.lName
  AND a.fName = o.fName
  AND a.mInit = o.mInit
</code></pre>

<p>This returns less records than expected because if mInit column is null for &ldquo;John Adams&rdquo; in both tables, it still doesn&rsquo;t match. There are generally 2 options for addressing this:</p>

<ul>
<li>run a function on the nullable columns so null values get cast to a comparable value</li>
<li>add an OR clause where both columns are null</li>
</ul>


<h2>Solutions:</h2>

<h3>cast null values via functions:</h3>

<pre><code>SELECT *
FROM addresses a, orders o
WHERE a.lName = o.lName
  AND a.fName = o.fName
  AND NVL(a.mInit, "") = NVL(o.mInit, "")
</code></pre>

<h3>extra clauses</h3>

<pre><code>SELECT *
FROM addresses a, orders o
WHERE a.lName = o.lName
  AND a.fName = o.fName
  AND ( (a.mInit = o.mInit) OR (a.mInit IS NULL AND o.mInit IS NULL) )
</code></pre>

<p>Neither option is fun (extra code, which is often less readable, or performance hits), but basically required when joining relational tables. If you are comparing similar tables, then you can take advantage of set operators (such as minus/intersect/union in Oracle) and bypass this problem.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/02/cq-defineObjects-cheatsheet/">CQ5 Resource - &lt;cq:defineObjects/> CheatSheet</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/11/the-evolution-of-looping/">The Evolution of Looping</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/06/octopress-first-steps/">Octopress First Steps</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/06/ghp-with-octopress/">Why Octopress</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/11/command-line-basics/">Command Line Basics</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/ItGumby">@ItGumby</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'ItGumby',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Brian Street -
  <span class="credit">An <a href="http://octopress.org">Octopress</a> blog.</span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'itgumby';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
