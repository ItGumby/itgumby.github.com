/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * To learn more about Gradle by exploring our Samples at https://docs.gradle.org/8.2.1/samples

 * heavily influenced by
   * https://github.com/melix/blog/blob/main/build.gradle (gradle v7.x)
   * https://github.com/msgilligan/msgilligan.github.io/blob/source/build.gradle
   * https://github.com/danhyun/blog/blob/master/build.gradle
 */
plugins {
   id 'org.jbake.site' version '5.5.0'
   id 'org.ajoberstar.git-publish' version '3.0.0'
}

dependencies {
   jbake "org.asciidoctor:asciidoctorj-diagram:2.2.3"
}

jbake {
   version = '2.6.7'
   clearCache = true

   srcDirName = 'src/jbake'
   destDirName = 'output'

   configuration['asciidoctor.option.requires'] = "asciidoctor-diagram" 
   configuration['asciidoctor.attributes'] = [
    "imagesoutdir=${bake.input}/assets/img",
    "imagesdir=/img"
   ]
}


// TODO: danhyun's `watch` plugin/task

gitPublish {
  repoUri = 'git@github.com:ItGumby/itgumby.github.com.git'
  branch = 'master' // 'gh-pages' for projects but not a person
  sign = false
  contents {
      from(tasks.named('bake'))
  }
}

defaultTasks 'bake'
